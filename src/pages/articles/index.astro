---
import { getCollection } from 'astro:content';
import ArticlesLayout from '../../layouts/ArticlesLayout.astro';

const articles = await getCollection('articles');
---

<ArticlesLayout title="Articles - Leonardo Camacho">
  <section class="articles-section">
    <h1>Articles</h1>
    <p>Stories that teach programming principles through real-world experiences</p>
    
    <div class="articles-grid">
      {articles.map(article => (
        <article class="article-card">
          {article.data.image && (
            <div class="article-thumbnail">
              <img 
                src={article.data.image} 
                alt={article.data.imageAlt || article.data.title}
                loading="lazy"
              />
            </div>
          )}
          <div class="article-content">
            <h2>
              <a href={`/articles/${article.slug}/`}>{article.data.title}</a>
            </h2>
            <p class="article-meta">
              <time>{article.data.date.toDateString()}</time>
              {article.data.author && <span> â€¢ by {article.data.author}</span>}
            </p>
            <p class="article-description">{article.data.description}</p>
            {article.data.tags && article.data.tags.length > 0 && (
              <div class="article-tags">
                {article.data.tags.slice(0, 3).map((tag) => (
                  <span class="tag">#{tag}</span>
                ))}
              </div>
            )}
          </div>
        </article>
      ))}
    </div>
  </section>
</ArticlesLayout>
