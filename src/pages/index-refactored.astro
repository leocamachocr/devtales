---
import Layout from '../layouts/Layout.astro';
import ContentCard from '../components/ContentCard.astro';
import { useHomepageContent } from '../utils/useHomepageContent';

// Obtener contenido usando el composable
const { allContent, tales } = await useHomepageContent({ maxItems: 6 });
---

<Layout title="Dev Tales - Leonardo Camacho">
  {allContent.length > 0 && (
    <section class="featured-content">
      <div class="content-grid">
        {allContent.map((item) => (
          <ContentCard item={item} tales={tales} />
        ))}
      </div>
      <div class="view-all-actions">
        <a href="/tales" class="view-all-link">View All Tales →</a>
        <a href="/posts" class="view-all-link">View All Posts →</a>
      </div>
    </section>
  )}
</Layout>

<style>
  .featured-content {
    max-width: 1200px;
    margin: 4rem auto;
    padding: 0 2rem;
  }

  .content-grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }

  .view-all-actions {
    text-align: center;
    margin-top: 3rem;
    display: flex;
    gap: 2rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .view-all-link {
    color: var(--color-accent);
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    transition: color 0.3s ease;
  }

  .view-all-link:hover {
    color: var(--color-highlight);
  }

  @media (max-width: 768px) {
    .content-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .featured-content {
      padding: 0 1rem;
    }

    .view-all-actions {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
